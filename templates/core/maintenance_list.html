{% extends 'core/base.html' %}
{% block content %}
<style>
/* ===== Trang Danh S√°ch Y√™u C·∫ßu B·∫£o Tr√¨ ===== */
.maint-table-container {
  max-width: 1100px;
  margin: 50px auto;
  background: #fff;
  padding: 30px;
  border-radius: 16px;
  box-shadow: 0 6px 25px rgba(179, 0, 0, 0.15);
  animation: fadeIn 0.4s ease-in-out;
  font-family: "Segoe UI", sans-serif;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Ti√™u ƒë·ªÅ */
.maint-table-container h2 {
  text-align: center;
  color: #b30000;
  font-weight: 700;
  margin-bottom: 25px;
}

/* N√∫t t·∫°o y√™u c·∫ßu */
.maint-table-container .button {
  display: inline-block;
  background-color: #b30000;
  color: white;
  padding: 10px 18px;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 600;
  margin-bottom: 20px;
  transition: background 0.3s, transform 0.2s;
}

.maint-table-container .button:hover {
  background-color: #e60000;
  transform: scale(1.03);
}

/* B·∫£ng */
.maint-table-container table {
  width: 100%;
  border-collapse: collapse;
  font-size: 15px;
}

.maint-table-container th,
.maint-table-container td {
  border: 1px solid #ddd;
  padding: 10px 12px;
  text-align: left;
  vertical-align: middle;
}

.maint-table-container th {
  background-color: #b30000;
  color: white;
  text-align: center;
}

.maint-table-container tr:nth-child(even) {
  background-color: #f9f9f9;
}

.maint-table-container tr:hover {
  background-color: #ffe5e5;
  transition: background-color 0.2s ease-in-out;
}

/* Li√™n k·∫øt trong b·∫£ng */
.maint-table-container a {
  color: #b30000;
  font-weight: 600;
  text-decoration: none;
}

.maint-table-container a:hover {
  text-decoration: underline;
}
</style>

<div class="maint-table-container">
  <h2>üß∞ Danh s√°ch y√™u c·∫ßu b·∫£o tr√¨</h2>
  
  <a class="button" href="{% url 'maintenance_create' %}">‚ûï T·∫°o y√™u c·∫ßu</a>
  
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Thi·∫øt b·ªã</th>
        <th>V·ªã tr√≠</th>
        <th>M√¥ t·∫£</th>
        <th>Tr·∫°ng th√°i</th>
        <th>Ng∆∞·ªùi g·ª≠i</th>
        <th>H√†nh ƒë·ªông</th>
      </tr>
    </thead>
    <tbody>
      {% for r in requests %}
        <tr>
          <td>{{ r.id }}</td>
          <td>{{ r.equipment }}</td>
          <td>{{ r.equipment.room.floor.building.name }} / 
              T·∫ßng {{ r.equipment.room.floor.number }} / 
              Ph√≤ng {{ r.equipment.room.code }}</td>
          <td>{{ r.description }}</td>
          <td>{{ r.get_status_display }}</td>
          <td>{{ r.created_by }}</td>
          <td>
            {% if user.is_superuser %}
              <a href="{% url 'maintenance_update' r.pk %}">C·∫≠p nh·∫≠t</a>
            {% endif %}
          </td>
        </tr>
      {% empty %}
        <tr><td colspan="7" style="text-align:center;">Kh√¥ng c√≥ y√™u c·∫ßu</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}